//------------------------------------------------------------------------------
//   Warning: This code was automatically generated.
//   Changes to this file may cause incorrect behavior
//   and will be lost when this file is regenerated.
//------------------------------------------------------------------------------
//
// |metacode:version=0.1|
// |metacode:generator_header|
using System;
using System.Linq;
using MetaFac.CG4.Generators;
using MetaFac.CG4.Models;
namespace MetaFac.CG4.Generator.RecordsV2
{
    public partial class Generator : GeneratorBase
    {
        public Generator() : base("RecordsV2") { }
        protected override void OnGenerate(ModelDefinition outerScope)
        {
// |metacode:generator_body|
DefineCSharpTypes();
Define("ParentName", "EntityBase");
Emit("#region Notices");
Emit("// <auto-generated>");
Emit("// Warning: This file was automatically generated. Changes to this file may");
Emit("// cause incorrect behavior and will be lost when this file is regenerated.");
Emit("// </auto-generated>");
if (IsDefined("CopyrightInfo"))
{
Emit("// <copyright>");
Emit("//     T_CopyrightInfo_");
Emit("// </copyright>");
}
Emit("// <information>");
Emit("// This file was generated using MetaFac.CG4 tools and user supplied metadata.");
Emit("// Generator: T_Generator_");
Emit("// Metadata : T_Metadata_");
Emit("// </information>");
Emit("#endregion");
Emit("#nullable enable");
Emit("#pragma warning disable CS1591 // Missing XML comment for publicly visible type or member");
Emit("#pragma warning disable CS8019 // Unnecessary using directive");
Emit("using MetaFac.Memory;");
Emit("using MetaFac.Mutability;");
Emit("using MetaFac.CG4.Runtime;");
Emit("using System;");
Emit("using System.Collections.Generic;");
Emit("using System.Collections.Immutable;");
Emit("using System.Linq;");
Emit("using System.Numerics;");
Emit("using T_Namespace_.Contracts;");
Emit("");
Emit("namespace T_Namespace_.RecordsV2");
Emit("{");
    using (Ignored())
    {
Emit("    using T_ExternalOtherType_ = System.Int64;");
Emit("    using T_ExternalMaybeType_ = System.DayOfWeek;");
Emit("    using T_IndexType_ = System.String;");
    }
Emit("");
    using (Ignored())
    {
Emit("    public sealed class T_ModelType__Factory : IEntityFactory<IT_ModelType_, T_ModelType_>");
Emit("    {");
Emit("        private static readonly T_ModelType__Factory _instance = new T_ModelType__Factory();");
Emit("        public static T_ModelType__Factory Instance => _instance;");
Emit("");
Emit("        public T_ModelType_? CreateFrom(IT_ModelType_? source)");
Emit("        {");
Emit("            if (source is null) return null;");
Emit("            if (source is T_ModelType_ thisEntity) return thisEntity;");
Emit("            return new T_ModelType_(source);");
Emit("        }");
Emit("");
Emit("        private readonly T_ModelType_ _empty = new T_ModelType_();");
Emit("        public T_ModelType_ Empty => _empty;");
Emit("    }");
Emit("    public record T_ModelType_ : EntityBase, IT_ModelType_");
Emit("    {");
Emit("        public static T_ModelType_? CreateFrom(IT_ModelType_? source)");
Emit("        {");
Emit("            if (source is null) return null;");
Emit("            if (source is T_ModelType_ concrete) return concrete;");
Emit("            return new T_ModelType_(source);");
Emit("        }");
Emit("");
Emit("        protected override int OnGetEntityTag() => 0;");
Emit("");
Emit("        public int TestData { get; init; }");
Emit("");
Emit("        public T_ModelType_() { }");
Emit("        public T_ModelType_(int testData)");
Emit("        {");
Emit("            TestData = testData;");
Emit("        }");
Emit("        public T_ModelType_(IT_ModelType_ source) : base(source)");
Emit("        {");
Emit("            if (source is null) throw new ArgumentNullException(nameof(source));");
Emit("            TestData = source.TestData;");
Emit("        }");
Emit("    }");
    }
Emit("");
Emit("    public abstract partial record EntityBase : IFreezable, IEntityBase");
Emit("    {");
Emit("        public EntityBase() { }");
Emit("        public EntityBase(EntityBase? source) { }");
Emit("        public EntityBase(IEntityBase? source) { }");
Emit("        public const int EntityTag = 0;");
Emit("        protected abstract int OnGetEntityTag();");
Emit("        public int GetEntityTag() => OnGetEntityTag();");
Emit("        public virtual bool Equals(EntityBase? other) => true;");
Emit("        public override int GetHashCode() => 0;");
Emit("        public bool IsFreezable() => false;");
Emit("        public bool IsFrozen() => true;");
Emit("        public void Freeze() { }");
Emit("        public bool TryFreeze() => false;");
Emit("    }");
Emit("");
    using (Ignored())
    {
Emit("    public record T_ParentName_ : EntityBase, IT_ParentName_");
Emit("    {");
Emit("        public T_ParentName_() { }");
Emit("        public T_ParentName_(T_ParentName_? source) : base(source) { }");
Emit("        public T_ParentName_(IT_ParentName_? source) : base(source) { }");
Emit("        public new const int EntityTag = 0;");
Emit("        protected override int OnGetEntityTag() => EntityTag;");
Emit("        public virtual bool Equals(T_ParentName_? other) => true;");
Emit("        public override int GetHashCode() => 0;");
Emit("    }");
    }
Emit("");
    foreach (var cd in outerScope.EntityDefs)
    {
        using (NewScope(cd))
        {
            if (cd.AllDerivedEntities.Count > 0)
            {
Emit("    public abstract partial record T_EntityName2_ : T_ParentName_, IT_EntityName2_");
Emit("    {");
Emit("    }");
Emit("    public sealed class T_EntityName2__Factory : IEntityFactory<IT_EntityName_, T_EntityName_>");
Emit("    {");
Emit("        private static readonly T_EntityName2__Factory _instance = new T_EntityName2__Factory();");
Emit("        public static T_EntityName2__Factory Instance => _instance;");
Emit("");
Emit("        public T_EntityName_? CreateFrom(IT_EntityName_? source)");
Emit("        {");
Emit("            if (source is null) return null;");
Emit("            int entityTag = source.GetEntityTag();");
Emit("            switch (entityTag)");
Emit("            {");
                            foreach (var derived in cd.DerivedEntities)
                            {
                                using (NewScope(derived))
                                {
Emit("                case T_EntityName_.EntityTag: return T_EntityName__Factory.Instance.CreateFrom((IT_EntityName_)source);");
                                }
                            }
Emit("                default:");
Emit("                    throw new InvalidOperationException($\"Unable to create {typeof(T_EntityName_)} from {source.GetType().Name}\");");
Emit("            }");
Emit("        }");
Emit("");
Emit("        public T_EntityName_ Empty => throw new NotSupportedException($\"Cannot create abstract entity: {typeof(T_EntityName_)}\");");
Emit("    }");
            }
            else
            {
Emit("    public sealed class T_EntityName__Factory : IEntityFactory<IT_EntityName_, T_EntityName_>");
Emit("    {");
Emit("        private static readonly T_EntityName__Factory _instance = new T_EntityName__Factory();");
Emit("        public static T_EntityName__Factory Instance => _instance;");
Emit("");
Emit("        public T_EntityName_? CreateFrom(IT_EntityName_? source)");
Emit("        {");
Emit("            if (source is null) return null;");
Emit("            if (source is T_EntityName_ thisEntity) return thisEntity;");
Emit("            return new T_EntityName_(source);");
Emit("        }");
Emit("");
Emit("        private static readonly T_EntityName_ _empty = new T_EntityName_();");
Emit("        public T_EntityName_ Empty => _empty;");
Emit("    }");
            }
Emit("    public partial record T_EntityName_ : T_ParentName_, IT_EntityName_");
Emit("    {");
                using (Ignored())
                {
Emit("        private const int T_EntityTag_ = 99;");
                }
Emit("        public new const int EntityTag = T_EntityTag_;");
Emit("        protected override int OnGetEntityTag() => EntityTag;");
Emit("");
                foreach (var fd in cd.MemberDefs)
                {
                    using (NewScope(fd))
                    {
                        var memberInfo = new MemberInfo(fd, _engine.Current);
                        switch (memberInfo.Kind)
                        {
                            case FieldKind.UnaryModel:
Emit("        public T_ModelType_? T_UnaryModelFieldName_ { get; init; }");
Emit("        IT_ModelType_? IT_EntityName_.T_UnaryModelFieldName_ => T_UnaryModelFieldName_;");
                                break;
                            case FieldKind.ArrayModel:
Emit("        public ImmutableList<T_ModelType_?>? T_ArrayModelFieldName_ { get; init; }");
Emit("        IReadOnlyList<IT_ModelType_?>? IT_EntityName_.T_ArrayModelFieldName_ => T_ArrayModelFieldName_;");
                                break;
                            case FieldKind.IndexModel:
Emit("        public ImmutableDictionary<T_IndexType_, T_ModelType_?>? T_IndexModelFieldName_ { get; init; }");
Emit("        IReadOnlyDictionary<T_IndexType_, IT_ModelType_?>? IT_EntityName_.T_IndexModelFieldName_");
Emit("            => T_IndexModelFieldName_ is null ? null");
Emit("            : new DictionaryFacade<T_IndexType_, IT_ModelType_?, T_ModelType_?>(T_IndexModelFieldName_, (x) => x);");
                                break;
                            case FieldKind.UnaryMaybe:
Emit("        public T_ExternalMaybeType_? T_UnaryMaybeFieldName_ { get; init; }");
Emit("        T_ExternalMaybeType_? IT_EntityName_.T_UnaryMaybeFieldName_ => T_UnaryMaybeFieldName_;");
                                break;
                            case FieldKind.ArrayMaybe:
Emit("        public ImmutableList<T_ExternalMaybeType_?>? T_ArrayMaybeFieldName_ { get; init; }");
Emit("        IReadOnlyList<T_ExternalMaybeType_?>? IT_EntityName_.T_ArrayMaybeFieldName_ => T_ArrayMaybeFieldName_;");
                                break;
                            case FieldKind.IndexMaybe:
Emit("        public ImmutableDictionary<T_IndexType_, T_ExternalMaybeType_?>? T_IndexMaybeFieldName_ { get; init; }");
Emit("        IReadOnlyDictionary<T_IndexType_, T_ExternalMaybeType_?>? IT_EntityName_.T_IndexMaybeFieldName_ => T_IndexMaybeFieldName_;");
                                break;
                            case FieldKind.UnaryOther:
Emit("        public T_ExternalOtherType_ T_UnaryOtherFieldName_ { get; init; }");
Emit("        T_ExternalOtherType_ IT_EntityName_.T_UnaryOtherFieldName_ => T_UnaryOtherFieldName_;");
                                break;
                            case FieldKind.ArrayOther:
Emit("        public ImmutableList<T_ExternalOtherType_>? T_ArrayOtherFieldName_ { get; init; }");
Emit("        IReadOnlyList<T_ExternalOtherType_>? IT_EntityName_.T_ArrayOtherFieldName_ => T_ArrayOtherFieldName_;");
                                break;
                            case FieldKind.IndexOther:
Emit("        public ImmutableDictionary<T_IndexType_, T_ExternalOtherType_>? T_IndexOtherFieldName_ { get; init; }");
Emit("        IReadOnlyDictionary<T_IndexType_, T_ExternalOtherType_>? IT_EntityName_.T_IndexOtherFieldName_ => T_IndexOtherFieldName_;");
                                break;
                            case FieldKind.UnaryBuffer:
Emit("        public Octets? T_UnaryBufferFieldName_ { get; init; }");
Emit("        Octets? IT_EntityName_.T_UnaryBufferFieldName_ => T_UnaryBufferFieldName_;");
                                break;
                            case FieldKind.ArrayBuffer:
Emit("        public ImmutableList<Octets?>? T_ArrayBufferFieldName_ { get; init; }");
Emit("        IReadOnlyList<Octets?>? IT_EntityName_.T_ArrayBufferFieldName_ => T_ArrayBufferFieldName_;");
                                break;
                            case FieldKind.IndexBuffer:
Emit("        public ImmutableDictionary<T_IndexType_, Octets?>? T_IndexBufferFieldName_ { get; init; }");
Emit("        IReadOnlyDictionary<T_IndexType_, Octets?>? IT_EntityName_.T_IndexBufferFieldName_ => T_IndexBufferFieldName_;");
                                break;
                            case FieldKind.UnaryString:
Emit("        public String? T_UnaryStringFieldName_ { get; init; }");
Emit("        String? IT_EntityName_.T_UnaryStringFieldName_ => T_UnaryStringFieldName_;");
                                break;
                            case FieldKind.ArrayString:
Emit("        public ImmutableList<String?>? T_ArrayStringFieldName_ { get; init; }");
Emit("        IReadOnlyList<String?>? IT_EntityName_.T_ArrayStringFieldName_ => T_ArrayStringFieldName_;");
                                break;
                            case FieldKind.IndexString:
Emit("        public ImmutableDictionary<T_IndexType_, String?>? T_IndexStringFieldName_ { get; init; }");
Emit("        IReadOnlyDictionary<T_IndexType_, String?>? IT_EntityName_.T_IndexStringFieldName_ => T_IndexStringFieldName_;");
                                break;
                            default: break;
                        }
                    }
                }
Emit("");
Emit("        public T_EntityName_() : base()");
Emit("        {");
Emit("        }");
Emit("");
Emit("        public T_EntityName_(T_EntityName_? source) : base(source)");
Emit("        {");
Emit("            if (source is null) throw new ArgumentNullException(nameof(source));");
                    foreach (var fd in cd.MemberDefs)
                    {
                        using (NewScope(fd))
                        {
                            var memberInfo = new MemberInfo(fd, _engine.Current);
                            switch (memberInfo.Kind)
                            {
                                case FieldKind.UnaryModel:
Emit("            T_UnaryModelFieldName_ = source.T_UnaryModelFieldName_;");
                                    break;
                                case FieldKind.ArrayModel:
Emit("            T_ArrayModelFieldName_ = source.T_ArrayModelFieldName_;");
                                    break;
                                case FieldKind.IndexModel:
Emit("            T_IndexModelFieldName_ = source.T_IndexModelFieldName_;");
                                    break;
                                case FieldKind.UnaryMaybe:
Emit("            T_UnaryMaybeFieldName_ = source.T_UnaryMaybeFieldName_;");
                                    break;
                                case FieldKind.ArrayMaybe:
Emit("            T_ArrayMaybeFieldName_ = source.T_ArrayMaybeFieldName_;");
                                    break;
                                case FieldKind.IndexMaybe:
Emit("            T_IndexMaybeFieldName_ = source.T_IndexMaybeFieldName_;");
                                    break;
                                case FieldKind.UnaryOther:
Emit("            T_UnaryOtherFieldName_ = source.T_UnaryOtherFieldName_;");
                                    break;
                                case FieldKind.ArrayOther:
Emit("            T_ArrayOtherFieldName_ = source.T_ArrayOtherFieldName_;");
                                    break;
                                case FieldKind.IndexOther:
Emit("            T_IndexOtherFieldName_ = source.T_IndexOtherFieldName_;");
                                    break;
                                case FieldKind.UnaryBuffer:
Emit("            T_UnaryBufferFieldName_ = source.T_UnaryBufferFieldName_;");
                                    break;
                                case FieldKind.ArrayBuffer:
Emit("            T_ArrayBufferFieldName_ = source.T_ArrayBufferFieldName_;");
                                    break;
                                case FieldKind.IndexBuffer:
Emit("            T_IndexBufferFieldName_ = source.T_IndexBufferFieldName_;");
                                    break;
                                case FieldKind.UnaryString:
Emit("            T_UnaryStringFieldName_ = source.T_UnaryStringFieldName_;");
                                    break;
                                case FieldKind.ArrayString:
Emit("            T_ArrayStringFieldName_ = source.T_ArrayStringFieldName_;");
                                    break;
                                case FieldKind.IndexString:
Emit("            T_IndexStringFieldName_ = source.T_IndexStringFieldName_;");
                                    break;
                                default: break;
                            }
                        }
                    }
Emit("        }");
Emit("");
Emit("        public T_EntityName_(IT_EntityName_? source) : base(source)");
Emit("        {");
Emit("            if (source is null) throw new ArgumentNullException(nameof(source));");
                    foreach (var fd in cd.MemberDefs)
                    {
                        using (NewScope(fd))
                        {
                            var memberInfo = new MemberInfo(fd, _engine.Current);
                            switch (memberInfo.Kind)
                            {
                                case FieldKind.UnaryModel:
Emit("            T_UnaryModelFieldName_ = T_ModelType__Factory.Instance.CreateFrom(source.T_UnaryModelFieldName_);");
                                    break;
                                case FieldKind.ArrayModel:
Emit("            T_ArrayModelFieldName_ = source.T_ArrayModelFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableList<T_ModelType_?>.Empty.AddRange(source.T_ArrayModelFieldName_.Select(x => T_ModelType__Factory.Instance.CreateFrom(x)));");
                                    break;
                                case FieldKind.IndexModel:
Emit("            T_IndexModelFieldName_ = source.T_IndexModelFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableDictionary<T_IndexType_, T_ModelType_?>.Empty.AddRange(");
Emit("                    source.T_IndexModelFieldName_.Select(x => new KeyValuePair<T_IndexType_, T_ModelType_?>(x.Key, T_ModelType__Factory.Instance.CreateFrom(x.Value))));");
                                    break;
                                case FieldKind.UnaryMaybe:
Emit("            T_UnaryMaybeFieldName_ = source.T_UnaryMaybeFieldName_;");
                                    break;
                                case FieldKind.ArrayMaybe:
Emit("            T_ArrayMaybeFieldName_ = source.T_ArrayMaybeFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableList<T_ExternalMaybeType_?>.Empty.AddRange(source.T_ArrayMaybeFieldName_);");
                                    break;
                                case FieldKind.IndexMaybe:
Emit("            T_IndexMaybeFieldName_ = source.T_IndexMaybeFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableDictionary<T_IndexType_, T_ExternalMaybeType_?>.Empty.AddRange(source.T_IndexMaybeFieldName_);");
                                    break;
                                case FieldKind.UnaryOther:
Emit("            T_UnaryOtherFieldName_ = source.T_UnaryOtherFieldName_;");
                                    break;
                                case FieldKind.ArrayOther:
Emit("            T_ArrayOtherFieldName_ = source.T_ArrayOtherFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableList<T_ExternalOtherType_>.Empty.AddRange(source.T_ArrayOtherFieldName_);");
                                    break;
                                case FieldKind.IndexOther:
Emit("            T_IndexOtherFieldName_ = source.T_IndexOtherFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableDictionary<T_IndexType_, T_ExternalOtherType_>.Empty.AddRange(source.T_IndexOtherFieldName_);");
                                    break;
                                case FieldKind.UnaryBuffer:
Emit("            T_UnaryBufferFieldName_ = source.T_UnaryBufferFieldName_;");
                                    break;
                                case FieldKind.ArrayBuffer:
Emit("            T_ArrayBufferFieldName_ = source.T_ArrayBufferFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableList<Octets?>.Empty.AddRange(source.T_ArrayBufferFieldName_");
Emit("                    .Select(x => (Octets?)x));");
                                    break;
                                case FieldKind.IndexBuffer:
Emit("            T_IndexBufferFieldName_ = source.T_IndexBufferFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableDictionary<T_IndexType_, Octets?>.Empty.AddRange(source.T_IndexBufferFieldName_");
Emit("                    .Select(x => new KeyValuePair<T_IndexType_, Octets?>(x.Key, x.Value)));");
                                    break;
                                case FieldKind.UnaryString:
Emit("            T_UnaryStringFieldName_ = source.T_UnaryStringFieldName_;");
                                    break;
                                case FieldKind.ArrayString:
Emit("            T_ArrayStringFieldName_ = source.T_ArrayStringFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableList<String?>.Empty.AddRange(source.T_ArrayStringFieldName_);");
                                    break;
                                case FieldKind.IndexString:
Emit("            T_IndexStringFieldName_ = source.T_IndexStringFieldName_ is null");
Emit("                ? default");
Emit("                : ImmutableDictionary<T_IndexType_, String?>.Empty.AddRange(source.T_IndexStringFieldName_);");
                                    break;
                                default: break;
                            }
                        }
                    }
Emit("        }");
Emit("");
Emit("        public virtual bool Equals(T_EntityName_? other)");
Emit("        {");
Emit("            if (other is null) return false;");
Emit("            if (ReferenceEquals(other, this)) return true;");
                    foreach (var fd in cd.MemberDefs)
                    {
                        using (NewScope(fd))
                        {
                            var memberInfo = new MemberInfo(fd, _engine.Current);
                            switch (memberInfo.Kind)
                            {
                                case FieldKind.UnaryModel:
Emit("            if (!T_UnaryModelFieldName_.ValueEquals(other.T_UnaryModelFieldName_)) return false;");
                                    break;
                                case FieldKind.ArrayModel:
Emit("            if (!T_ArrayModelFieldName_.ArrayEquals(other.T_ArrayModelFieldName_)) return false;");
                                    break;
                                case FieldKind.IndexModel:
Emit("            if (!T_IndexModelFieldName_.IndexEquals(other.T_IndexModelFieldName_)) return false;");
                                    break;
                                case FieldKind.UnaryMaybe:
Emit("            if (!T_UnaryMaybeFieldName_.ValueEquals(other.T_UnaryMaybeFieldName_)) return false;");
                                    break;
                                case FieldKind.ArrayMaybe:
Emit("            if (!T_ArrayMaybeFieldName_.ArrayEquals(other.T_ArrayMaybeFieldName_)) return false;");
                                    break;
                                case FieldKind.IndexMaybe:
Emit("            if (!T_IndexMaybeFieldName_.IndexEquals(other.T_IndexMaybeFieldName_)) return false;");
                                    break;
                                case FieldKind.UnaryOther:
Emit("            if (!T_UnaryOtherFieldName_.ValueEquals(other.T_UnaryOtherFieldName_)) return false;");
                                    break;
                                case FieldKind.ArrayOther:
Emit("            if (!T_ArrayOtherFieldName_.ArrayEquals(other.T_ArrayOtherFieldName_)) return false;");
                                    break;
                                case FieldKind.IndexOther:
Emit("            if (!T_IndexOtherFieldName_.IndexEquals(other.T_IndexOtherFieldName_)) return false;");
                                    break;
                                case FieldKind.UnaryBuffer:
Emit("            if (!T_UnaryBufferFieldName_.ValueEquals(other.T_UnaryBufferFieldName_)) return false;");
                                    break;
                                case FieldKind.ArrayBuffer:
Emit("            if (!T_ArrayBufferFieldName_.ArrayEquals(other.T_ArrayBufferFieldName_)) return false;");
                                    break;
                                case FieldKind.IndexBuffer:
Emit("            if (!T_IndexBufferFieldName_.IndexEquals(other.T_IndexBufferFieldName_)) return false;");
                                    break;
                                case FieldKind.UnaryString:
Emit("            if (!T_UnaryStringFieldName_.ValueEquals(other.T_UnaryStringFieldName_)) return false;");
                                    break;
                                case FieldKind.ArrayString:
Emit("            if (!T_ArrayStringFieldName_.ArrayEquals(other.T_ArrayStringFieldName_)) return false;");
                                    break;
                                case FieldKind.IndexString:
Emit("            if (!T_IndexStringFieldName_.IndexEquals(other.T_IndexStringFieldName_)) return false;");
                                    break;
                                default: break;
                            }
                        }
                    }
Emit("            return base.Equals(other);");
Emit("        }");
Emit("");
Emit("        private int CalcHashCode()");
Emit("        {");
Emit("            HashCode hc = new HashCode();");
                    foreach (var fd in cd.MemberDefs)
                    {
                        using (NewScope(fd))
                        {
                            var memberInfo = new MemberInfo(fd, _engine.Current);
                            switch (memberInfo.Kind)
                            {
                                case FieldKind.UnaryModel:
Emit("            hc.Add(T_UnaryModelFieldName_.CalcHashUnary());");
                                    break;
                                case FieldKind.ArrayModel:
Emit("            hc.Add(T_ArrayModelFieldName_.CalcHashArray());");
                                    break;
                                case FieldKind.IndexModel:
Emit("            hc.Add(T_IndexModelFieldName_.CalcHashIndex());");
                                    break;
                                case FieldKind.UnaryMaybe:
Emit("            hc.Add(T_UnaryMaybeFieldName_.CalcHashUnary());");
                                    break;
                                case FieldKind.ArrayMaybe:
Emit("            hc.Add(T_ArrayMaybeFieldName_.CalcHashArray());");
                                    break;
                                case FieldKind.IndexMaybe:
Emit("            hc.Add(T_IndexMaybeFieldName_.CalcHashIndex());");
                                    break;
                                case FieldKind.UnaryOther:
Emit("            hc.Add(T_UnaryOtherFieldName_.CalcHashUnary());");
                                    break;
                                case FieldKind.ArrayOther:
Emit("            hc.Add(T_ArrayOtherFieldName_.CalcHashArray());");
                                    break;
                                case FieldKind.IndexOther:
Emit("            hc.Add(T_IndexOtherFieldName_.CalcHashIndex());");
                                    break;
                                case FieldKind.UnaryBuffer:
Emit("            hc.Add(T_UnaryBufferFieldName_.CalcHashUnary());");
                                    break;
                                case FieldKind.ArrayBuffer:
Emit("            hc.Add(T_ArrayBufferFieldName_.CalcHashArray());");
                                    break;
                                case FieldKind.IndexBuffer:
Emit("            hc.Add(T_IndexBufferFieldName_.CalcHashIndex());");
                                    break;
                                case FieldKind.UnaryString:
Emit("            hc.Add(T_UnaryStringFieldName_.CalcHashUnary());");
                                    break;
                                case FieldKind.ArrayString:
Emit("            hc.Add(T_ArrayStringFieldName_.CalcHashArray());");
                                    break;
                                case FieldKind.IndexString:
Emit("            hc.Add(T_IndexStringFieldName_.CalcHashIndex());");
                                    break;
                                default: break;
                            }
                        }
                    }
Emit("            hc.Add(base.GetHashCode());");
Emit("            return hc.ToHashCode();");
Emit("        }");
Emit("");
Emit("        private int? _hashCode = null;");
Emit("        public override int GetHashCode()");
Emit("        {");
Emit("            if (_hashCode is null)");
Emit("                _hashCode = CalcHashCode();");
Emit("            return _hashCode.Value;");
Emit("        }");
Emit("    }");
Emit("");
        }
    }
Emit("");
    using (Ignored())
    {
Emit("    public sealed record T_DerivedName_ : T_EntityName_, IT_DerivedName_");
Emit("    {");
Emit("        public T_DerivedName_() { }");
Emit("        public T_DerivedName_(T_DerivedName_? source) : base(source) { }");
Emit("        public T_DerivedName_(IT_DerivedName_? source) : base(source) { }");
Emit("    }");
    }
Emit("");
Emit("}");
// |metacode:generator_footer|
        }
    }
}
// |metacode:generator_end|
